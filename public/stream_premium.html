<!--
  Premium streaming page for Kixonair

  This page is a complete, standalone player and chat interface modeled off the
  authentic Kixonair stream experience.  It maintains all of the original
  functionality—preloader, player controls, chapters, up‑next schedule,
  live chat, and help widget—while applying a more luxurious look and feel.
  The premium styling is applied via overrides near the end of the document,
  preserving the existing markup and behaviour but upgrading the visual
  presentation with glassy panels, subtle shadows and consistent brand
  colours.  You can serve this page as `stream_premium.html` alongside
  your existing assets or replace the previous watcher page entirely.
-->
<!DOCTYPE html>
<html lang="en">
<head>
<script>
(function(){
  var ok = ['kixonair.com','www.kixonair.com'];
  try {
    if (!ok.includes(location.hostname)) {
      location.replace('https://kixonair.com');
    }
  } catch(e){}
})();
</script>
<link rel="canonical" href="https://kixonair.com/"/>


  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kixonair — Live</title>

  <!-- Anti-FOUC + Critical Preloader styles (inline & first) -->
  <script>document.documentElement.classList.add('fouc-hide');</script>
  <style>
    /* Hide body until we drop preloader */
    .fouc-hide body{visibility:hidden}

    /* === Preloader === */
    .kix-preloader{
      position:fixed; inset:0; z-index:2147483000;
      display:grid; place-items:center;
      background:radial-gradient(120% 120% at 50% 30%, #0b0d12 0%, #06080d 70%, #05070c 100%);
      color:#e9eefb; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, Helvetica, sans-serif;
      transition:opacity .55s ease, visibility .55s ease;
    }
    .kix-preloader.hide{opacity:0; visibility:hidden}
    .kix-pre-card{
      border:1px solid rgba(255,255,255,.08);
      background:linear-gradient(180deg,#0e1421,#0b111d);
      border-radius:18px; padding:22px 24px; min-width:min(92vw,420px);
      box-shadow:0 24px 80px rgba(0,0,0,.55), inset 0 0 0 1px rgba(255,255,255,.04);
      text-align:center;
    }
    .kix-logo{display:inline-flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.2px;margin-bottom:8px}
    .kix-dot{width:9px;height:9px;border-radius:50%;background:#ff3b30;box-shadow:0 0 0 0 rgba(255,59,48,.6);animation:kixPulse 1.4s infinite}
    @keyframes kixPulse{0%{box-shadow:0 0 0 0 rgba(255,59,48,.6)}70%{box-shadow:0 0 0 12px rgba(255,59,48,0)}100%{box-shadow:0 0 0 0 rgba(255,59,48,0)}}
    .kix-title{font-size:18px}
    .kix-sub{font-size:12px;color:#a8b0c2}
    .kix-row{display:flex;align-items:center;justify-content:center;gap:12px;margin:12px 0}
    .kix-spinner{width:44px;height:44px;border-radius:50%;border:3px solid rgba(255,255,255,.18);border-top-color:#fff;animation:kixSpin 1s linear infinite}
    @keyframes kixSpin{to{transform:rotate(360deg)}}
    .kix-progress{height:8px;border-radius:999px;overflow:hidden;background:#0b1120;border:1px solid #1d2840}
    .kix-bar{height:100%;width:28%;background:linear-gradient(90deg,#ff4747,#ff6b6b);animation:kixSlide 1.4s ease-in-out infinite}
    @keyframes kixSlide{0%{transform:translateX(-120%)}50%{transform:translateX(20%)}100%{transform:translateX(220%)}}

    /* Page entrance anim helpers */
    body.page-enter .anim-fade-up{opacity:1;transform:none}
    .anim-fade-up{opacity:0;transform:translateY(12px);transition:opacity .45s ease,transform .45s ease}
    .delay-1{transition-delay:.06s}.delay-2{transition-delay:.12s}.delay-3{transition-delay:.18s}.delay-4{transition-delay:.24s}

    /* Minimal base */
    .muted{color:#a8b0c2}

    /* Typing indicator */
    .kix-typing{display:inline-flex;gap:6px;align-items:center}
    .kix-typing .dot{width:6px;height:6px;border-radius:50%;background:#e2e8f0;opacity:.6;animation:kixTyping 1.1s infinite ease-in-out}
    .kix-typing .dot:nth-child(2){animation-delay:.15s}
    .kix-typing .dot:nth-child(3){animation-delay:.3s}
    @keyframes kixTyping{0%,100%{transform:translateY(0);opacity:.35}50%{transform:translateY(-3px);opacity:1}}
  </style>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&family=Material+Symbols+Rounded:wght@400;500&display=swap" rel="stylesheet">

  <!-- Tailwind utilities (for some UI bits) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root{
      --bg:#0b0d12; --text:#e9eefb; --muted:#a8b0c2; --live:#ff3b30;
      --chrome:#0d111a; --chrome-2:#0a0f18; --border:#1b2437;
      --accent:#ff4747; --accent-2:#ff6b6b; --controls-h:56px; --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:#06080d;color:var(--text);font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Arial,Helvetica,sans-serif;overflow-x:hidden}
    .app{max-width:1024px;margin:14px auto 40px;padding:0 10px}

    /* Player shell */
    .player{position:relative;border-radius:var(--radius);overflow:hidden;box-shadow:0 20px 60px rgba(0,0,0,.55);aspect-ratio:16/9;border:1px solid #141a26;display:grid;place-items:center;background:radial-gradient(120% 120% at 50% 30%, #101827 0%, #070b12 60%, #03060b 100%);animation:kixPlayerIn .6s ease .2s both}
    @keyframes kixPlayerIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
    .player.loading{cursor:progress}
    .player::before{content:"";position:absolute;inset:0;border-radius:inherit;pointer-events:none;box-shadow:inset 0 0 0 1px rgba(255,255,255,.06),inset 0 0 0 2px rgba(0,0,0,.85)}

    .poster{position:absolute;inset:0;background:
      linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,0) 30%),
      radial-gradient(80% 60% at 50% 0%, rgba(255,71,71,.08), transparent 35%),
      repeating-linear-gradient(45deg, rgba(255,255,255,.04) 0 2px, transparent 2px 6px);
      filter:saturate(.9) brightness(.9)}

    /* LIVE indicators */
    .liveBadge{position:absolute;z-index:3;top:10px;right:10px;display:flex;align-items:center;gap:6px;background:rgba(0,0,0,.55);border:1px solid rgba(255,255,255,.08);padding:4px 9px;border-radius:999px;font-weight:700;letter-spacing:.3px;backdrop-filter:blur(6px)}
    .liveDot{width:9px;height:9px;border-radius:50%;background:var(--live);box-shadow:0 0 0 0 rgba(255,59,48,.7);animation:kixPulse 1.4s infinite}
    .liveText{font-size:12px}
    .livePill{display:none;align-items:center;gap:6px;background:rgba(255,59,48,.15);color:#ffd1cd;border:1px solid rgba(255,59,48,.35);padding:4px 10px;border-radius:999px;font-size:12px;font-weight:700}
    .livePill .dot{width:8px;height:8px;border-radius:50%;background:var(--live);animation:kixPulse 1.4s infinite}
    .player.playing .liveBadge{display:none}
    .player.playing .livePill{display:inline-flex}

    /* overlay (play poster) */
    .overlay{position:absolute;inset:0;z-index:2;display:grid;place-items:center;gap:12px;background:linear-gradient(180deg,rgba(0,0,0,.18),rgba(0,0,0,.55) 65%, rgba(0,0,0,0) 100%)}
    .playBtn{width:72px;height:72px;border-radius:50%;border:none;display:grid;place-items:center;cursor:pointer;color:white;background:radial-gradient(120% 120% at 50% 50%,rgba(255,255,255,.12),transparent 60%), linear-gradient(135deg,#ff4747,#ff6b6b);box-shadow:0 12px 30px rgba(0,0,0,.45);transition:transform .08s ease}
    .playBtn:hover{transform:translateY(-1px)}
    .playBtn:active{transform:translateY(1px)}
    .hint{color:#a8b0c2;font-size:12px}

    /* Loading */
    .loadingWrap{position:absolute;inset:0;z-index:5;display:grid;place-items:center;gap:10px;background:linear-gradient(180deg,rgba(0,0,0,.15),rgba(0,0,0,.45))}
    .spinner{width:44px;height:44px;border-radius:50%;border:3px solid rgba(255,255,255,.18);border-top-color:#fff;animation:kixSpin 1s linear infinite}
    @keyframes kixSpin{to{transform:rotate(360deg)}}
    .status{font-size:13px;color:#d7def1}
    .hidden{display:none!important}

    /* Controls bar */
    .controls{position:absolute;z-index:3;left:8px;right:8px;bottom:calc(6px + env(safe-area-inset-bottom,0px));display:flex;align-items:center;gap:10px;padding:8px;background:linear-gradient(180deg,var(--chrome),var(--chrome-2));border:1px solid var(--border);border-radius:12px;box-shadow:0 8px 22px rgba(0,0,0,.45);transition:opacity .25s ease, transform .25s ease}
    .controls.autohide{opacity:0;transform:translateY(110%);pointer-events:none}
    .controls.prestart{opacity:.95;transform:none;pointer-events:none;filter:saturate(.85)}
    .cluster{display:flex;align-items:center;gap:8px}
    .iconBtn{display:grid;place-items:center;width:40px;height:40px;border-radius:8px;background:#0c1220;border:1px solid rgba(255,255,255,.06);color:#eaf0ff;cursor:pointer;transition:transform .08s ease}
    .iconBtn:hover{transform:translateY(-1px)}
    .iconBtn:active{transform:translateY(1px)}

    .progress{position:relative;flex:1;height:10px;border-radius:999px;background:#0b1120;border:1px solid #1d2840;overflow:hidden}
    .progressBuffered{position:absolute;inset:0;height:100%;background:linear-gradient(90deg,rgba(255,255,255,.18),rgba(255,255,255,.08));width:0}
    .progressFill{position:absolute;inset:0;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent-2));width:0}
    .thumb{position:absolute;top:50%;transform:translate(-50%,-50%);width:14px;height:14px;border-radius:50%;background:#fff;box-shadow:0 0 0 3px rgba(255,255,255,.25);left:0}
    .tooltip{position:absolute;bottom:100%;transform:translateX(-50%);padding:4px 6px;background:#0f172a;color:#e2e8f0;border:1px solid #243045;border-radius:6px;font-size:11px;white-space:nowrap;pointer-events:none;opacity:0;transition:opacity .15s ease}

    /* Mobile */
    @media (max-width:480px){
      :root{ --controls-h:56px; --radius:12px }
      .app{margin:8px auto 18px; padding:0 8px}
      .player{border-radius:var(--radius)}
      .playBtn{width:64px;height:64px}
      .iconBtn{width:44px;height:44px}
      .progress{height:12px}
      .cluster.right .iconBtn.extra{display:none}
      .reactions{left:8px;bottom:calc(var(--controls-h) + env(safe-area-inset-bottom,0px) + 12px);gap:4px}
      .reactBtn{width:32px;height:32px;font-size:16px}
    }

    /* CAPTCHA card styles */
    .captchaModal{position:fixed; inset:0; display:grid; place-items:center; z-index:1000; padding:clamp(12px,3vw,24px); background:rgba(0,0,0,.6); -webkit-backdrop-filter:blur(6px); backdrop-filter:blur(6px)}
    .captchaModal.hidden{display:none}
    .captchaCard{width:min(560px,96vw); max-height:min(92vh,720px); overflow:auto; background:#fff; color:#111827; border-radius:20px; box-shadow:0 24px 80px rgba(0,0,0,.5); border:1px solid rgba(0,0,0,.06)}
    .captchaBody{padding:clamp(14px,2.5vw,24px)}

    .material-symbols-rounded{
      font-variation-settings: 'FILL' 0, 'wght' 500, 'GRAD' 0, 'opsz' 24;
      font-size:22px; line-height:1; display:block;
    }

    /* Viewer badge + reactions */
    .viewerBadge{
      position:absolute; z-index:3; top:10px; left:10px;
      display:flex; align-items:center; gap:6px;
      background:rgba(0,0,0,.55); border:1px solid rgba(255,255,255,.08);
      padding:4px 9px; border-radius:999px; font-weight:700; letter-spacing:.3px;
      backdrop-filter:blur(6px); -webkit-backdrop-filter:blur(6px); font-size:12px;
    }
    .reactions{position:absolute;left:10px;bottom:80px;display:flex;gap:6px;z-index:4}
    .reactBtn{width:36px;height:36px;border-radius:999px;border:1px solid rgba(255,255,255,.15);background:rgba(0,0,0,.35);backdrop-filter:blur(6px);cursor:pointer;font-size:18px}
    .bubble{position:absolute;pointer-events:none;animation:floatUp 1.2s ease-out forwards;font-size:22px;filter:drop-shadow(0 6px 12px rgba(0,0,0,.4))}
    @keyframes floatUp{0%{transform:translateY(0) scale(.9);opacity:.9}70%{opacity:1}100%{transform:translateY(-90px) scale(1.2);opacity:0}}

    /* Sections */
    .section{border:1px solid #141a26;border-radius:16px;background:linear-gradient(180deg,#0c121d,#0a0f18);box-shadow:0 14px 40px rgba(0,0,0,.45)}
    .badge{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.06);backdrop-filter:blur(6px)}
    .avatar{width:42px;height:42px;border-radius:999px;display:grid;place-items:center;background:#121a2a;border:1px solid rgba(255,255,255,.08)}
    .chip{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;border:1px solid #172033;background:#0c1220;cursor:pointer;transition:transform .08s ease, border-color .12s}
    .chip:hover{border-color:#23304a;transform:translateY(-1px)}
    .grid-cards{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
    .card{grid-column:span 12;border:1px solid #141a26;border-radius:14px;background:#0a0f18;padding:14px}
    @media(min-width:860px){.card{grid-column:span 4}}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.08);background:#0c1220;cursor:pointer;transition:transform .08s ease}
    .btn:hover{transform:translateY(-1px)}
    .btn:active{transform:translateY(1px)}
    .divider{height:1px;background:linear-gradient(90deg,transparent,#1a2438,transparent)}

    /* Beautiful, consistent red CTA */
    .kix-reg-btn{
      display:inline-flex;align-items:center;gap:8px;
      padding:10px 14px;border-radius:999px;
      font-weight:600;line-height:1;text-decoration:none;
      color:#fff;background:linear-gradient(135deg,#ef4444,#f87171);
      border:1px solid #f87171;
      box-shadow:0 10px 24px rgba(239,68,68,.28), inset 0 0 0 1px rgba(255,255,255,.08);
      transition:transform .08s ease, box-shadow .2s ease, filter .2s ease;
      position:relative; overflow:hidden; will-change:transform;
    }
    .kix-reg-btn:hover{transform:translateY(-1px);filter:saturate(1.05);box-shadow:0 14px 32px rgba(239,68,68,.38)}
    .kix-reg-btn:active{transform:translateY(1px)}
    .kix-reg-btn:focus-visible{outline:2px solid #fff;outline-offset:2px}
    .kix-reg-btn .material-symbols-rounded{font-size:18px;line-height:1}
    .kix-reg-btn.small{padding:8px 12px;font-size:13px}

    /* --- cute entrance + one-time shine for CTAs (restored) --- */
    @keyframes kixPop { from { transform: translateY(6px) scale(.98); opacity: 0 } to { transform:none; opacity:1 } }
    @keyframes kixShine {
      0%   { transform: translateX(-140%) skewX(-20deg); opacity: 0 }
      25%  { opacity: .55 }
      60%  { opacity: .25 }
      100% { transform: translateX(140%) skewX(-20deg); opacity: 0 }
    }
    .page-enter .kix-reg-btn::after{
      content:""; position:absolute; inset:-40% -20%;
      background: linear-gradient(90deg, rgba(255,255,255,0) 0%,
                                           rgba(255,255,255,.65) 45%,
                                           rgba(255,255,255,0) 100%);
      filter: blur(10px);
      transform: translateX(-140%) skewX(-20deg);
      animation: kixShine 1.1s ease-out .35s 1 both;
      pointer-events:none;
    }
    .page-enter .kix-reg-btn{ animation: kixPop .45s ease-out .2s both }
    .page-enter #kixHelpLauncher{ animation: kixPop .45s ease-out .25s both }
  </style>
</head>
<body>

  <!-- Preloader -->
  <div id="preloader" class="kix-preloader">
    <div class="kix-pre-card">
      <div class="kix-logo"><span class="kix-dot"></span><span class="kix-title">Kixonair Stream</span></div>
      <div class="kix-sub">Loading experience…</div>
      <div class="kix-row" style="margin-top:14px">
        <div class="kix-spinner" aria-hidden="true"></div>
      </div>
      <div class="kix-progress"><div class="kix-bar"></div></div>
    </div>
  </div>

  <div class="app" role="application" aria-label="Live player">
    <!-- Player -->
    <div class="player anim-fade-up delay-1" id="player">
      <div class="poster" aria-hidden="true"></div>

      <div class="liveBadge" id="liveBadge" aria-label="Live indicator">
        <span class="liveDot" aria-hidden="true"></span><span class="liveText">LIVE</span>
      </div>

      <div class="viewerBadge" aria-label="Viewer count">
        <span id="viewerCount">0 watching</span>
      </div>

      <div class="overlay" id="overlay">
        <button class="playBtn" id="playBtn" aria-label="Play">
          <span class="material-symbols-rounded" aria-hidden="true" style="font-size:28px">play_arrow</span>
        </button>
        <div class="hint">Tap to play</div>
      </div>

      <div class="loadingWrap hidden" id="loading" aria-live="polite" aria-busy="false">
        <div class="spinner" aria-hidden="true"></div>
        <div class="status" id="status">Connecting…</div>
      </div>

      <div class="reactions" aria-label="Quick reactions">
        <button class="reactBtn">❤️</button>
        <button class="reactBtn">😂</button>
        <button class="reactBtn">🔥</button>
        <button class="reactBtn">👍</button>
      </div>

      <div class="controls prestart" id="controls" role="group" aria-label="Player controls">
        <div class="cluster left">
          <button class="iconBtn" id="ctrlRew" title="Back 10s" aria-label="Back 10 seconds"><span class="material-symbols-rounded">replay_10</span></button>
          <button class="iconBtn" id="ctrlPlay" title="Play/Pause" aria-label="Play/Pause"><span class="material-symbols-rounded">play_arrow</span></button>
          <button class="iconBtn" id="ctrlFwd" title="Forward 10s" aria-label="Forward 10 seconds"><span class="material-symbols-rounded">forward_10</span></button>
        </div>

        <div class="progress" id="progress" role="slider" aria-label="Seek" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
          <div class="progressBuffered" id="progressBuffered"></div>
          <div class="progressFill" id="progressFill"></div>
          <div class="thumb" id="thumb"></div>
          <div class="tooltip" id="seekTip">00:00</div>
        </div>

        <div class="cluster right">
          <span class="livePill" id="livePill"><span class="dot" aria-hidden="true"></span> LIVE</span>
          <button class="iconBtn extra" id="ctrlSettings" title="Settings" aria-label="Settings"><span class="material-symbols-rounded">settings</span></button>
          <button class="iconBtn" id="fullscreen" title="Fullscreen" aria-label="Fullscreen"><span class="material-symbols-rounded">fullscreen</span></button>
        </div>
      </div>
    </div>

    <!-- Stream info -->
    <section class="section mt-4 p-4 anim-fade-up delay-2">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
        <div>
          <div class="flex items-center gap-2 text-sm text-red-300">
            <span class="material-symbols-rounded">fiber_manual_record</span>
            Live • English commentary
          </div>
          <p class="mt-1 text-sm muted">kixonair • 1080p • Low latency</p>
        </div>
        <div class="flex items-center gap-2">
          <button id="likeBtn" class="btn" aria-pressed="false"><span class="material-symbols-rounded">favorite</span> Like</button>
          <button id="saveBtn" class="btn"><span class="material-symbols-rounded">bookmark_add</span> Save</button>
          <button id="reportBtn" class="btn"><span class="material-symbols-rounded">flag</span> Report</button>
        </div>
      </div>
      <div class="divider my-4"></div>
      <details class="group">
        <summary class="cursor-pointer list-none flex items-center gap-2">
          <span class="material-symbols-rounded">info</span>
          <span class="font-semibold">Stream description</span>
          <span class="material-symbols-rounded ml-1 group-open:rotate-180 transition-transform">expand_more</span>
        </summary>
        <p class="mt-3 text-sm leading-relaxed text-slate-300">
          Welcome to kixonair. Enjoy the match, halftime reactions, and post-game analysis. Chapters below jump to key moments.
        </p>
      </details>
    </section>

    <!-- Chapters -->
    <section class="section mt-4 p-4 anim-fade-up delay-3" aria-label="Chapters">
      <div class="flex items-center gap-2 mb-3">
        <span class="material-symbols-rounded">schedule</span>
        <h2 class="text-lg font-semibold">Chapters</h2>
      </div>
      <div class="flex flex-wrap gap-2" id="chapters">
        <button class="chip" data-seconds="0"><span class="material-symbols-rounded">flag</span> Kickoff</button>
        <button class="chip" data-seconds="600"><span class="material-symbols-rounded">sports</span> First-half highlights</button>
        <button class="chip" data-seconds="1800"><span class="material-symbols-rounded">stadia_controller</span> Halftime show</button>
        <button class="chip" data-seconds="3000"><span class="material-symbols-rounded">trophy</span> Final moments</button>
        <button class="chip" data-seconds="3600"><span class="material-symbols-rounded">forum</span> Live Q&A</button>
      </div>
    </section>

    <!-- Up next + Chat -->
    <section class="mt-4 grid gap-4 lg:grid-cols-3 anim-fade-up delay-4">
      <div class="lg:col-span-2 section p-4">
        <div class="flex items-center gap-2 mb-3">
          <span class="material-symbols-rounded">event</span>
          <h2 class="text-lg font-semibold">Up next</h2>
        </div>
        <div class="grid-cards">
          <article class="card">
            <div class="flex items-center gap-3">
              <div class="avatar"><span class="material-symbols-rounded">sports_esports</span></div>
              <div>
                <div class="font-semibold">Aftershow: Locker Room Cam</div>
                <div class="text-sm muted">Starts 10 min after stream ends</div>
              </div>
            </div>
          </article>
          <article class="card">
            <div class="flex items-center gap-3">
              <div class="avatar"><span class="material-symbols-rounded">mic_external_on</span></div>
              <div>
                <div class="font-semibold">Press Conference</div>
                <div class="text-sm muted">Coach + MVP Q&A</div>
              </div>
            </div>
          </article>
          <article class="card">
            <div class="flex items-center gap-3">
              <div class="avatar"><span class="material-symbols-rounded">calendar_clock</span></div>
              <div>
                <div class="font-semibold">Tomorrow: Highlights Recap</div>
                <div class="text-sm muted">Premiering 18:00</div>
              </div>
            </div>
          </article>
        </div>
      </div>

      <!-- Live chat (visible, read-only, locked) -->
      <aside class="section p-4" aria-label="Live chat (locked)">
        <div class="flex items-center justify-between mb-3">
          <div class="flex items-center gap-2">
            <span class="material-symbols-rounded">chat</span>
            <h2 class="text-lg font-semibold">Live chat</h2>
          </div>
          <span class="badge text-xs"><span class="material-symbols-rounded">group</span><span id="chatCount">0</span></span>
        </div>

        <div id="chatFeed" class="space-y-2 max-h-72 overflow-auto pr-1"></div>

        <!-- Lock bar: CTA only -->
        <div id="lockBar" class="mt-3 rounded-lg border border-red-700/40 bg-red-950/30 p-3 flex items-center justify-between">
          <div class="flex items-center gap-2">
            <span class="material-symbols-rounded">lock</span>
            <span class="text-sm">Chat is read-only. Register to join.</span>
          </div>
          <a href="https://hydrofiles.com/sportbani"
             target="_top" rel="noopener"
             data-register
             class="kix-reg-btn">
            <span class="material-symbols-rounded">how_to_reg</span>
            <span>Register to chat</span>
          </a>
        </div>

        <!-- Disabled input (visible but not usable) -->
        <form id="chatForm" class="mt-3 flex gap-2 opacity-40 pointer-events-none" onsubmit="return false" aria-disabled="true">
          <input id="chatInput" class="flex-1 rounded-lg border border-slate-700 bg-[#0b1120] px-3 py-2 text-sm outline-none" placeholder="Register to chat to participate" disabled/>
          <button id="chatSend" class="btn" disabled><span class="material-symbols-rounded">send</span></button>
        </form>
      </aside>
    </section>

    <footer class="mt-6 text-center text-xs muted anim-fade-up delay-4">
      © <span id="year"></span> kixonair. All rights reserved.
    </footer>
  </div>

  <!-- FULLSCREEN CAPTCHA MODAL (non-dismissible) -->
  <div id="captchaModal" class="captchaModal hidden" role="dialog" aria-modal="true" aria-labelledby="captchaTitle">
    <div class="captchaCard" id="captchaCard">
      <div class="captchaBody" id="captchaContainer">
        <div class="flex items-center mb-4">
          <img src="https://www.gstatic.com/recaptcha/api2/logo_48.png" alt="reCAPTCHA" class="w-9 h-9">
          <span id="captchaTitle" class="ml-3 text-2xl font-semibold">reCAPTCHA</span>
        </div>

        <label for="notRobotCheckbox" class="flex items-center bg-gray-100 border border-gray-300 rounded-lg p-4 cursor-pointer hover:bg-gray-200 transition">
          <input type="checkbox" id="notRobotCheckbox" class="w-8 h-8 accent-red-600 border-gray-300 rounded mr-4">
          <span class="text-lg font-medium flex-grow">I’m not a robot</span>
          <img src="https://www.gstatic.com/recaptcha/api2/logo_48.png" alt="icon" class="w-8 h-8">
        </label>

        <p class="mt-4 text-sm text-gray-600 leading-relaxed">
          This site is protected by reCAPTCHA and the Google
          <a href="https://policies.google.com/privacy" class="underline text-red-600">Privacy Policy</a>
          and
          <a href="https://policies.google.com/terms" class="underline text-red-600">Terms of Service</a>
          apply.
        </p>

        <!-- keep CPAGrip offer block INSIDE CAPTCHA -->
        <div id="offerContent" class="hidden mt-4 text-gray-700 space-y-4">
          <div class="text-base">{%offers%}</div>
          <p class="text-center text-sm">{%anchor_text%}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Core player script -->
  <script>
    const player = document.getElementById('player');
    const overlay = document.getElementById('overlay');
    const playBtn = document.getElementById('playBtn');
    const loading = document.getElementById('loading');
    const controls = document.getElementById('controls');
    const fullscreenBtn = document.getElementById('fullscreen');

    const progress = document.getElementById('progress');
    const progressFill = document.getElementById('progressFill');
    const progressBuffered = document.getElementById('progressBuffered');
    const thumb = document.getElementById('thumb');
    const seekTip = document.getElementById('seekTip');

    const ctrlRew = document.getElementById('ctrlRew');
    const ctrlPlay = document.getElementById('ctrlPlay');
    const ctrlFwd = document.getElementById('ctrlFwd');

    const icon = (name) => '<span class="material-symbols-rounded" aria-hidden="true">'+name+'</span>';
    const PLAY_ICON  = 'play_arrow';
    const PAUSE_ICON = 'pause';

    const FAKE_DURATION = 7200; // 2h
    let fakeCurrent = 0;
    let ticking = false;
    let hideTimer = null;

    // init play button state
    ctrlPlay.dataset.state = 'play';
    ctrlPlay.innerHTML = icon(PLAY_ICON);

    function startLoading(){
      player.classList.add('playing');
      controls.classList.remove('prestart');

      overlay.classList.add('hidden');
      loading.classList.remove('hidden');
      loading.setAttribute('aria-busy','true');
      player.classList.add('loading');

      ctrlPlay.dataset.state = 'pause';
      ctrlPlay.innerHTML = icon(PAUSE_ICON);

      // After 5s show CAPTCHA and stop spinner
      setTimeout(function(){
        loading.classList.add('hidden');
        player.classList.remove('loading');
        showCaptcha();
      }, 5000);

      if(!ticking){
        ticking = true;
        setInterval(function(){
          fakeCurrent = Math.min(FAKE_DURATION, fakeCurrent+1);
          const pct = (fakeCurrent/FAKE_DURATION)*100;
          progressFill.style.width = pct + '%';
          progress.setAttribute('aria-valuenow', Math.round(pct));
          thumb.style.left = pct + '%';
          progressBuffered.style.width = Math.min(100, pct+10) + '%';
        }, 1000);
      }
    }

    playBtn.addEventListener('click', startLoading);

    const showControls = function(){
      controls.classList.remove('autohide');
      clearTimeout(hideTimer);
      hideTimer = setTimeout(function(){ controls.classList.add('autohide'); }, 2200);
    };
    ['mousemove','touchstart'].forEach(function(ev){ player.addEventListener(ev, showControls, {passive:true}); });

    function setSeekFromClientX(x){
      const rect = progress.getBoundingClientRect();
      const pct = Math.max(0, Math.min(1, (x-rect.left)/rect.width));
      fakeCurrent = Math.round(FAKE_DURATION*pct);
      const p = pct*100; progressFill.style.width=p+'%'; thumb.style.left=p+'%';
      seekTip.style.left = p+'%';
      seekTip.textContent = formatTime(fakeCurrent);
    }
    progress.addEventListener('mousedown', function(e){ setSeekFromClientX(e.clientX); seekTip.style.opacity=1; showControls(); });
    window.addEventListener('mousemove', function(e){ if(seekTip.style.opacity==1) setSeekFromClientX(e.clientX); });
    window.addEventListener('mouseup', function(){ seekTip.style.opacity=0; });

    progress.addEventListener('touchstart', function(e){ var t=e.touches[0]; setSeekFromClientX(t.clientX); seekTip.style.opacity=1; showControls(); }, {passive:true});
    progress.addEventListener('touchmove', function(e){ var t=e.touches[0]; setSeekFromClientX(t.clientX); }, {passive:true});
    progress.addEventListener('touchend', function(){ seekTip.style.opacity=0; }, {passive:true});

    ctrlRew.addEventListener('click', function(){ fakeCurrent=Math.max(0,fakeCurrent-10); setSeekFromClientX(progress.getBoundingClientRect().left + (fakeCurrent/FAKE_DURATION)*progress.clientWidth); showControls(); });
    ctrlFwd.addEventListener('click', function(){ fakeCurrent=Math.min(FAKE_DURATION,fakeCurrent+10); setSeekFromClientX(progress.getBoundingClientRect().left + (fakeCurrent/FAKE_DURATION)*progress.clientWidth); showControls(); });

    ctrlPlay.addEventListener('click', function(){
      if (ctrlPlay.dataset.state === 'play') {
        ctrlPlay.dataset.state = 'pause';
        ctrlPlay.innerHTML = icon(PAUSE_ICON);
      } else {
        ctrlPlay.dataset.state = 'play';
        ctrlPlay.innerHTML = icon(PLAY_ICON);
      }
      showControls();
    });

    function toggleFullscreen(){
      const container = document.getElementById('player');
      if(!document.fullscreenElement){ if (container.requestFullscreen) container.requestFullscreen(); }
      else if (document.exitFullscreen) document.exitFullscreen();
    }
    fullscreenBtn.addEventListener('click', toggleFullscreen);

    function formatTime(s){
      const m = Math.floor(s/60); const mm = (m%60<10?'0':'')+(m%60);
      const ss = (s%60<10?'0':'')+(s%60);
      const hh = Math.floor(m/60); if(hh>0) return (hh<10?'0':'')+hh+':'+mm+':'+ss;
      return mm+':'+ss;
    }

    /* CAPTCHA open */
    function showCaptcha() {
      const modal = document.getElementById('captchaModal');
      if (modal) {
        modal.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
        setTimeout(function(){ var cb=document.getElementById('notRobotCheckbox'); if(cb) cb.focus(); }, 60);
      }
    }

    /* Viewer count wobble */
    (function(){
      const viewerCount = document.getElementById('viewerCount');
      if (!viewerCount) return;
      let viewers = Math.floor(Math.random() * (9999 - 200 + 1)) + 200;
      viewerCount.textContent = viewers.toLocaleString() + ' watching';
      setInterval(function(){
        const delta = Math.floor(Math.random()*7) - 3;
        viewers = Math.max(1, viewers + delta);
        viewerCount.textContent = viewers.toLocaleString() + ' watching';
      }, 1500);
    })();

    /* Emoji reactions */
    (function(){
      var btns = document.querySelectorAll('.reactBtn');
      for (var i=0;i<btns.length;i++){
        btns[i].addEventListener('click', function(e){
          var bub = document.createElement('div');
          bub.className = 'bubble';
          bub.textContent = e.currentTarget.textContent.replace(/\s+/g,'').trim();

          var pr = player.getBoundingClientRect();
          var br = e.currentTarget.getBoundingClientRect();
          var centerX = (br.left + br.right)/2 - pr.left;
          var centerY = (br.top - pr.top) + br.height/2;
          var bottom = pr.height - centerY;

          bub.style.left = centerX + 'px';
          bub.style.bottom = bottom + 'px';
          player.appendChild(bub);
          setTimeout(function(){ if(bub&&bub.parentNode) bub.parentNode.removeChild(bub); }, 1300);
        });
      }

      (function scheduleAutoEmoji(){
        var buttons = Array.prototype.slice.call(document.querySelectorAll('.reactBtn'));
        if (!buttons.length) return;
        var target = buttons[Math.floor(Math.random()*buttons.length)];
        var heart = null;
        for (var j=0;j<buttons.length;j++){ if (buttons[j].textContent.indexOf('❤️')>-1){ heart=buttons[j]; break; } }
        if (heart && Math.random() < 0.6) target = heart;

        var taps = 1 + Math.floor(Math.random()*3);
        for (var k=0;k<taps;k++){
          (function(idx){ setTimeout(function(){ target.dispatchEvent(new Event('click', {bubbles:true})); }, idx*120); })(k);
        }
        setTimeout(scheduleAutoEmoji, 800 + Math.random()*2200);
      })();
    })();

    document.getElementById('year').textContent = new Date().getFullYear();
  </script>

  <!-- Seeded live chat -->
  <script>
  (function () {
    function $(id){ return document.getElementById(id); }
    var feed = $('chatFeed'), counter = $('chatCount');
    if (!feed) return;

    var pre = ["kixon","kixo","kixonair","footy","football","goal","topbins","nutmeg","press","counter","ultra","stadium","stand","winger","keeper","striker","midfield","xg","tifo","awaydays","homeend","derby","corner","setpiece","var","offside","throughball","box2box","sweeper","maestro","dribbler","fan","northend","southend","eaststand","weststand","matchday","captain","bench","clutch","stoppage","gameday","finals","cup","league","redzone","bluezone","touchline","halfspace","lowblock","highpress"];
    var suf = ["king","queen","boss","master","wizard","goat","pro","guy","gal","addict","nerd","fan","crew","szn","days","city","fc","ultra","army","hd","tv","live","zone","hub","central","core","watch","talk","chat","club","tribe","gang","eleven","ninety","88","90","99","101","24","365"];

    function r(a){ return a[Math.floor(Math.random()*a.length)]; }
    function handle(){
      var joiner = Math.random() < 0.55 ? "_" : (Math.random()<0.25 ? "." : "");
      var n = Math.random() < 0.85 ? (Math.random()<0.6 ? Math.floor(7+Math.random()*94) : Math.floor(100+Math.random()*900)) : "";
      return Math.random() < 0.5 ? (r(pre)+joiner+r(suf)+(n!==""?n:"")) : (r(pre)+(n!==""?n:"")+joiner+r(suf));
    }

    var names = [];
    for (var i=0; i<400; i++) {
      var h = handle();
      if (names.indexOf(h) === -1) names.push(h); else i--;
    }

    var msgs = [
      "GOAL! what a finish","keeper saved us big time","press press press","VAR check incoming?","offside or clean?",
      "need fresh legs now","sub him on","midfield running the show","yellow all day","ref is having a shocker",
      "man of the match?","parking the bus","counter was lethal","nutmeg of the night","perfect overlapping run",
      "corner coming up","defend the set piece","captain leading by example","backline too high","home crowd is loud",
      "away end bouncing","pinged it top bins","xG must be crazy","clean sheet please","we are through on goal",
      "bring on the youngster","how many added minutes?","stop time wasting","he is on a hat-trick","whip it in",
      "keep the shape","win those second balls","great switch of play","sweeper keeper moment","derby is spicy tonight",
      "i would take a draw now","title race back on","deflection helped","what a tackle","that is a soft foul",
      "clinical finish","back post run","he bottled that chance","crossbar saved them","we need width","overlap all day",
      "bench going wild","manager masterclass","tactical tweak worked","absolute shambles at the back","one more goal",
      "ice cold pen","nerves of steel","through ball was filthy","handball or not","linesman missed that",
      "he is limping a bit","screamer from distance","keeper got fingertips on it","push the line higher",
      "mark the runner","coach fuming on the touchline","pitch looks heavy tonight","fans are the 12th man",
      "bragging rights on the line","history maker if he scores","we are cooking now","top class composure",
      "limbs in the stands","set piece routine worked","near post flick","far post tap in","he should square it",
      "keeper distribution is class","crucial interception","early cross needed","recycle possession","switch of play on",
      "high line risky","low block hard to break","midfield press is on","through the lines","create triangles",
      "target man option","in behind again","he dragged the shot","drag back skill","dragging defenders wide",
      "quick one-two","overload the flank","underlap run works","late runner unmarked","mark at the back stick",
      "take the foul smartly","professional foul maybe","soft penalty call","studs showing risky","book him surely",
      "he is rattled now","momentum swing here","crowd up for it","great game management","he wasted the chance"
    ];

    function pushMessage(author, text){
      var row = document.createElement("div");
      row.className = "flex items-start gap-2";
      row.innerHTML =
        '<div class="avatar" style="width:34px;height:34px"><span class="material-symbols-rounded">person</span></div>'+
        '<div><div class="text-xs muted">'+author+' • just now</div>'+
        '<div class="text-sm">'+text+'</div></div>';
      feed.appendChild(row);
      feed.scrollTop = feed.scrollHeight;
      if (counter) counter.textContent = String((+counter.textContent||0) + 1);
      window.__kixon_seeded = (window.__kixon_seeded||0) + 1;
    }

    var seedTotal = 500, seeded = 0;
    function seedChunk(){
      var per = 50;
      for (var i=0; i<per && seeded<seedTotal; i++, seeded++){
        var author = names[Math.floor(Math.random()*names.length)];
        var text   = msgs[Math.floor(Math.random()*msgs.length)];
        pushMessage(author, text);
      }
      if (seeded < seedTotal) setTimeout(seedChunk, 40);
    }
    seedChunk();

    (function tick(){
      var author = names[Math.floor(Math.random()*names.length)];
      var text   = msgs[Math.floor(Math.random()*msgs.length)];
      pushMessage(author, text);
      setTimeout(tick, 1000 + Math.random()*600);
    })();
  })();
  </script>

  <!-- Preloader controller -->
  <script>
    (function(){
      var start = Date.now();
      function dropPreloader(){
        var pre = document.getElementById('preloader');
        if (pre){ pre.classList.add('hide'); setTimeout(function(){ pre.remove(); }, 650); }
        document.documentElement.classList.remove('fouc-hide');
        document.body.classList.add('page-enter');
      }
      function ready(){
        var seeded = window.__kixon_seeded||0;
        if (document.readyState === 'complete' && (seeded >= 60 || (Date.now()-start) > 1600)){
          dropPreloader();
        } else {
          setTimeout(ready, 120);
        }
      }
      if (document.readyState === 'complete') ready();
      else window.addEventListener('load', ready);
    })();
  </script>

  <!-- Re-enable captcha checkbox -> reveal offers -->
  <script>
  (function initCaptchaToggle(){
    function setup(){
      var checkbox = document.getElementById('notRobotCheckbox');
      var offers   = document.getElementById('offerContent');
      if (!checkbox || !offers) return false;
      function sync(){ offers.classList.toggle('hidden', !checkbox.checked); }
      checkbox.addEventListener('change', sync);
      sync();
      return true;
    }
    if (!setup()) document.addEventListener('DOMContentLoaded', setup);
  })();
  </script>

  <!-- Help / Support widget (uses new button style) -->
  <div id="kixHelpRoot" class="fixed right-4 bottom-[calc(1rem+env(safe-area-inset-bottom,0px))] z-[2147483001]">
    <section id="kixHelpPanel"
      class="invisible opacity-0 scale-95 pointer-events-none
             transition-all duration-200 ease-out
             mb-3 w-[min(92vw,420px)] rounded-2xl border border-[#1b2437]
             shadow-[0_18px_60px_rgba(0,0,0,.55)]
             bg-[linear-gradient(180deg,theme(colors.slate.900/.85),theme(colors.slate.950/.9))]
             backdrop-blur-md text-[var(--text)]"
      role="dialog" aria-modal="true" aria-labelledby="kixHelpTitle" aria-hidden="true">
      <header class="flex items-center justify-between p-3">
        <div class="flex items-center gap-2">
          <div class="w-8 h-8 rounded-full grid place-items-center border border-white/10" style="background:#121a2a">
            <span class="material-symbols-rounded">support_agent</span>
          </div>
          <div>
            <h3 id="kixHelpTitle" class="text-sm font-semibold">Need help?</h3>
            <p class="text-[11px] text-[var(--muted)] -mt-0.5">We usually reply in a few minutes</p>
          </div>
        </div>
        <button id="kixHelpClose" class="rounded-lg border border-white/10 bg-black/30 w-9 h-9 grid place-items-center" aria-label="Close help panel">
          <span class="material-symbols-rounded">close</span>
        </button>
      </header>

      <div class="h-px bg-gradient-to-r from-transparent via-[#1a2438] to-transparent"></div>

      <div class="p-3 pt-2">
        <div id="kixHelpFeed" class="max-h-72 overflow-auto pr-1 space-y-2 text-sm" aria-live="polite" aria-relevant="additions">
          <div class="flex items-start gap-2">
            <div class="w-7 h-7 rounded-full grid place-items-center border border-white/10" style="background:#121a2a">
              <span class="material-symbols-rounded" style="font-size:18px">robot_2</span>
            </div>
            <div>
              <div class="text-[11px] text-[var(--muted)]">Assistant • just now</div>
              <div>Hi! Ask your question below.</div>
            </div>
          </div>
        </div>

        <form id="kixHelpForm" class="mt-3 flex gap-2" onsubmit="return false">
          <label for="kixHelpInput" class="sr-only">Type your message</label>
          <input id="kixHelpInput" class="flex-1 rounded-lg border border-slate-700 bg-[#0b1120] px-3 py-2 text-sm outline-none" placeholder="Type your message…" />
          <button id="kixHelpSend" class="px-3 py-2 rounded-lg border border-white/10 bg-[#0c1220] hover:translate-y-[-1px] transition" aria-label="Send message">
            <span class="material-symbols-rounded">send</span>
          </button>
        </form>

        <div class="mt-3 text-[11px] text-[var(--muted)]">
          Prefer email? <a href="mailto:support@kixonair.example" class="underline decoration-[var(--accent)]">support@kixonair.example</a>
        </div>
      </div>
    </section>

    <button id="kixHelpLauncher"
            class="relative rounded-full w-14 h-14 grid place-items-center
                   border border-white/10 shadow-[0_12px_40px_rgba(0,0,0,.5)]
                   hover:translate-y-[-1px] active:translate-y-[1px]
                   bg-[radial-gradient(120%_120%_at_50%_50%,rgba(255,255,255,.08),transparent_60%),linear-gradient(135deg,var(--accent),var(--accent-2))]"
            aria-label="Open help">
      <span class="material-symbols-rounded text-white" aria-hidden="true">chat</span>
      <span id="kixHelpDot" class="absolute -top-0.5 -right-0.5 w-3 h-3 rounded-full"
            style="background:var(--live); box-shadow:0 0 0 0 rgba(255,59,48,.6); animation:kixPulse 1.4s infinite"></span>
    </button>
  </div>

  <script>
  (function helpWidget(){
    const panel    = document.getElementById('kixHelpPanel');
    const launcher = document.getElementById('kixHelpLauncher');
    const closeBtn = document.getElementById('kixHelpClose');
    const dot      = document.getElementById('kixHelpDot');
    const feed     = document.getElementById('kixHelpFeed');
    const form     = document.getElementById('kixHelpForm');
    const input    = document.getElementById('kixHelpInput');

    function openPanel(){
      panel.classList.remove('pointer-events-none','opacity-0','scale-95','invisible');
      panel.classList.add('opacity-100','scale-100');
      panel.setAttribute('aria-hidden','false');
      if (dot) dot.style.display='none';
      setTimeout(()=>input?.focus(),120);
    }
    function closePanel(){
      panel.classList.add('pointer-events-none','opacity-0','scale-95','invisible');
      panel.classList.remove('opacity-100','scale-100');
      panel.setAttribute('aria-hidden','true');
    }
    launcher.addEventListener('click', openPanel);
    closeBtn.addEventListener('click', closePanel);
    window.addEventListener('keydown', e => { if (e.key === 'Escape') closePanel(); });

    function escapeHtml(s){ return s.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

    function pushMsg(author, html, {me=false, renderRaw=false} = {}){
      const row = document.createElement('div');
      row.className = 'flex items-start gap-2';
      const avatar = me
        ? '<div class="w-7 h-7 rounded-full grid place-items-center border border-white/10" style="background:#1a2336"><span class="material-symbols-rounded" style="font-size:18px">person</span></div>'
        : '<div class="w-7 h-7 rounded-full grid place-items-center border border-white/10" style="background:#121a2a"><span class="material-symbols-rounded" style="font-size:18px">robot_2</span></div>';
      const meta = '<div class="text-[11px] text-[var(--muted)]">'+author+' • just now</div>';
      const body = renderRaw ? '<div class="mt-0.5 kix-assistant-raw">'+html+'</div>' : '<div class="mt-0.5">'+escapeHtml(html)+'</div>';
      row.innerHTML = avatar + '<div>'+meta+body+'</div>';
      feed.appendChild(row);
      feed.scrollTop = feed.scrollHeight;
      return row;
    }

    function showTyping(){
      const node = pushMsg('Assistant',
        '<span class="kix-typing" aria-label="typing"><span class="dot"></span><span class="dot"></span><span class="dot"></span></span>',
        {me:false, renderRaw:true});
      return ()=>{ try{ node.remove(); }catch(e){} };
    }

    // Chat helper reply: simple text + pretty red Register button
    const REGISTER_BLOCK = `
<div style="margin-top:10px">
  <a href="https://hydrofiles.com/sportbani" target="_top" rel="noopener"
     data-register class="kix-reg-btn small">
    <span class="material-symbols-rounded" style="font-size:18px;line-height:1">how_to_reg</span>
    <span>Register</span>
  </a>
</div>`;

    function autoReply(){
      const stopTyping = showTyping();
      setTimeout(()=>{
        stopTyping();
        pushMsg('Assistant','You need to register first.');
        pushMsg('Assistant', REGISTER_BLOCK, {renderRaw:true});
      }, 900);
    }

    form.addEventListener('submit', function(){
      const val = (input.value || '').trim();
      if (!val) return;
      pushMsg('You', val, {me:true});
      input.value = '';
      autoReply();
    });
    document.getElementById('kixHelpSend')?.addEventListener('click', () => {
      form.dispatchEvent(new Event('submit'));
    });
  })();
  </script>

  <!-- Resilient register-link handler (guarded for iframes/previews) -->
  <script>
  (function hardenRegisterLinks(){
    const REG_URL = "https://hydrofiles.com/sportbani";

    // Detect previews/iframes (e.g., CPAgrip) and avoid hijacking clicks there
    const inIframe = (() => { try { return window.top !== window; } catch(_) { return true; } })();
    const sandboxed = (() => { try { return !!window.frameElement?.hasAttribute('sandbox'); } catch(_) { return true; } })();

    const initBasic = () => document.querySelectorAll('a[data-register]').forEach(a => {
      a.href = REG_URL;
      a.setAttribute('target', '_top');
      const rel = (a.getAttribute('rel') || '').split(/\s+/);
      ["noopener","noreferrer","external","nofollow"].forEach(v => { if (!rel.includes(v)) rel.push(v); });
      a.setAttribute('rel', rel.join(' ').trim());
    });

    if (inIframe || sandboxed) {
      if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', initBasic); else initBasic();
      return; // don't attach click handlers inside preview
    }

    // Live site behavior: attempt new tab, fallback same tab
    function goRegister(ev){
      ev?.preventDefault?.();
      try {
        const w = window.open(REG_URL, "_blank", "noopener");
        if (!w || w.closed || typeof w.closed === "undefined") location.href = REG_URL;
      } catch { location.href = REG_URL; }
    }
    function wire(a){
      if (!a) return;
      const rel = (a.getAttribute("rel") || "").split(/\s+/);
      ["noopener","noreferrer","external","nofollow"].forEach(v => { if (!rel.includes(v)) rel.push(v); });
      a.setAttribute("rel", rel.join(" ").trim());
      a.addEventListener("click", goRegister, {capture:true});
    }
    const init = () => document.querySelectorAll('a[data-register]').forEach(wire);
    if (document.readyState === "loading") document.addEventListener('DOMContentLoaded', init); else init();
  })();
  </script>

  <!-- Premium look overrides embedded -->
  <style>
    /* Premium look overrides for the Kixonair player page */

    /* Apply a blurred, glassy backdrop to sections */
    .section {
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      background: rgba(14, 20, 32, 0.85);
      border: 1px solid #23304a;
      box-shadow: 0 14px 40px rgba(0, 0, 0, 0.45), 0 2px 6px rgba(0, 0, 0, 0.2);
    }

    /* Enhance cards within up-next and similar grids */
    .card {
      background: rgba(16, 22, 33, 0.92);
      border: 1px solid #273b5c;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
    }

    /* Polish player frame with a subtle border and shadows */
    .player {
      border: 1px solid #2b4159;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), inset 0 0 0 1px rgba(255, 255, 255, 0.05);
      background: radial-gradient(120% 120% at 50% 30%, #101827 0%, #0c1422 60%, #05070c 100%);
    }

    /* Refine control bar styling */
    .controls {
      background: linear-gradient(180deg, #0c1222, #16233c);
      border: 1px solid #2a3956;
      box-shadow: 0 8px 22px rgba(0, 0, 0, 0.45);
    }

    /* Lighten the progress bar and tooltip */
    .progress {
      background: #0a1120;
      border: 1px solid #1d2840;
    }

    /* Subtle glow effect for the live badge */
    .liveBadge {
      background: rgba(0, 0, 0, 0.55);
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 0 0 10px rgba(255, 59, 48, 0.4);
    }

    /* Unify badge components */
    .badge {
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.12);
    }

    /* Soften and brighten buttons */
    .btn {
      background: linear-gradient(135deg, #f87171, #ef4444);
      border: 1px solid #ef4444;
      color: #fff;
      box-shadow: 0 6px 16px rgba(239, 68, 68, 0.28);
    }

    /* Adjust chip background */
    .chip {
      background: #0c1220;
      border: 1px solid #172033;
      color: #e5eeff;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    }

    /* Slightly enlarge and brighten the reaction icons */
    .reactBtn {
      background: rgba(0, 0, 0, 0.35);
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
    }
  </style>
</body>
</html>