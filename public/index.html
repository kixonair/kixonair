<!doctype html>
<html lang="en">
<head>
  <meta name="theme-color" content="#0b0f14">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="theme-color" content="#0b0f14" />
<title>Kixonair ‚Äî Live Sports Schedule</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/styles.css?v=21" />
<link rel="icon" href="/logo.svg" type="image/svg+xml" />
  <link rel="stylesheet" href="/scoreless.css">
</head>
<body>
<header class="header">
  <div class="bar">
    <a class="brand" href="/"><img src="/logo.svg" alt="Kixonair" height="28"/></a>
    <!-- Search bar sits outside the collapsible controls so it remains accessible on mobile -->
    <input id="q" type="text" placeholder="Search team‚Ä¶" aria-label="Search team"/>
    <!-- Mobile menu toggle button. Hidden on larger screens via CSS. -->
    <button id="menuBtn" class="menu-btn" aria-label="Toggle menu">
      <!-- Inline SVG hamburger icon to avoid external font dependencies -->
      <svg class="icon" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z" fill="currentColor"></path>
      </svg>
    </button>
    <div class="controls">
      <!-- The filters and other toggles remain in the controls container; search was moved above -->
      <div class="filters" role="tablist">
        <button class="pill active" data-sport="all">All</button>
        <button class="pill" data-sport="Football">Football</button>
        <button class="pill" data-sport="NBA">NBA</button>
        <button class="pill" data-sport="NFL">NFL</button>
      </div>
      <div class="league-wrap" id="leagueWrap">
        <button class="pill" id="leagueToggle" aria-expanded="false" aria-controls="leagueMenu">Leagues ‚ñæ</button>
        <div class="league-menu hidden" id="leagueMenu" role="menu" aria-label="Choose league"></div>
        <span class="muted small" id="leagueChosen" style="margin-left:6px;"></span>
      </div>
      <label class="switch" title="Hide youth / reserves / friendlies">
        <input type="checkbox" id="majorOnly"><span>Major only</span>
      </label>
      <!--
        The original Kixonair UI allowed the user to pick a specific date
        (today or tomorrow) to view fixtures.  In the redesigned version
        we instead surface all fixtures scheduled to start within the next
        48¬†hours and keep them on screen until they finish.  To avoid
        confusing interactions we hide the date picker and its associated
        buttons.  The underlying inputs remain in the markup for
        potential future use but are hidden via inline style.
      -->
      <div class="datepick" style="display:none">
        <input id="date" type="date" aria-label="Pick a date"/>
        <button id="today" class="ghost">Today</button>
        <button id="tomorrow" class="ghost">Tomorrow</button>
      </div>
    </div>
    <!-- Overlay for mobile menu. Appears behind controls when menu is open. -->
    <div id="menuOverlay" class="menu-overlay"></div>
  </div>
</header>

<main>
  <section class="hero">
    <h1>Today‚Äôs Games, Zero Noise.</h1>
    <p>Pick a game ‚Üí quick access ‚Üí match center.</p>
  </section>

  <div id="counts" class="counts">Loading‚Ä¶</div>

  <section class="section" data-sport="Football">
    <h2>‚öΩ Football</h2>
    <div id="football" class="feed"></div>
  </section>

  <section class="section" data-sport="NBA">
    <h2>üèÄ NBA</h2>
    <div id="nba" class="feed"></div>
  </section>

  <section class="section" data-sport="NFL">
    <h2>üèà NFL</h2>
    <div id="nfl" class="feed"></div>
  </section>
</main>

<footer class="footer">
  <div class="inner">
    <span>¬© <span id="yy"></span> Kixonair</span>
    <!-- SEO‚Äëfriendly description: clearly describe what Kixonair offers without implying it hosts streams -->
    <span class="muted">Welcome to Kixonair.com, the best site for free live sports streaming. Watch NBA, NFL, UFC, F1, and MLB games in high quality without buffering. Enjoy smooth and reliable streams of your favorite sports online. Explore more categories and never miss the action with Kixonair.</span>
  </div>
</footer>

<script>
  document.getElementById('yy').textContent = new Date().getFullYear();
  const WATCH_URL = 'https://rileymarker.com/sportlo';
  const OPEN_IN_NEW_TAB = true;

  const fmtTime = d => new Date(d).toLocaleTimeString([], {hour:'2-digit', minute:'2-digit', hour12:false});
  const slug = s => s.toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,'');
  const pills = [].slice.call(document.querySelectorAll('.pill[data-sport]'));
  const gridSections = [].slice.call(document.querySelectorAll('.section'));

  let activeSport = 'all';
  let leagueKey = 'all';
  let ALL = [];

  // === Favourites ===
  // Store an array of slugs in localStorage to persist favourited games across sessions.
  function getFavs(){
    try{
      const raw = localStorage.getItem('favourites');
      return raw ? JSON.parse(raw) : [];
    }catch{ return []; }
  }
  function saveFavs(arr){
    try{
      localStorage.setItem('favourites', JSON.stringify(arr));
    }catch{}
  }
  function isFav(slug){
    if (!slug) return false;
    const favs = getFavs();
    return favs.includes(slug);
  }
  function toggleFav(slug){
    if (!slug) return;
    let favs = getFavs();
    const idx = favs.indexOf(slug);
    if (idx >= 0) favs.splice(idx,1); else favs.push(slug);
    saveFavs(favs);
    renderLists();
  }


  function nameOf(fx){ return (fx.league && (fx.league.name || fx.league.code)) || ''; }
  function codeIs(fx, code){ return fx.league && (fx.league.code||'').toUpperCase() === code.toUpperCase(); }
  const LEAGUES = [
    { key:'all', label:'All Leagues', test: function(){ return true; } },
    { key:'ucl', label:'UEFA Champions League', test: fx => codeIs(fx,'CL') || /champions league/i.test(nameOf(fx)) },
    { key:'uel', label:'UEFA Europa League', test: fx => codeIs(fx,'EL') || /europa league/i.test(nameOf(fx)) },
    { key:'uecl', label:'UEFA Europa Conference League', test: fx => codeIs(fx,'ECL') || /conference league/i.test(nameOf(fx)) },
    { key:'pl',  label:'Premier League (England)', test: fx => codeIs(fx,'PL') || /premier league/i.test(nameOf(fx)) },
    { key:'laliga', label:'La Liga (Spain)', test: fx => codeIs(fx,'PD') || /(la\s*liga|primera division)/i.test(nameOf(fx)) },
    { key:'bundes', label:'Bundesliga (Germany)', test: fx => codeIs(fx,'BL1') || /bundesliga/i.test(nameOf(fx)) },
    { key:'seriea', label:'Serie A (Italy)', test: fx => codeIs(fx,'SA') || /serie\s*a/i.test(nameOf(fx)) },
    { key:'ligue1', label:'Ligue 1 (France)', test: fx => codeIs(fx,'FL1') || /ligue\s*1/i.test(nameOf(fx)) }
  ];
  const leagueWrap = document.getElementById('leagueWrap');
  const leagueMenu = document.getElementById('leagueMenu');
  const leagueToggle = document.getElementById('leagueToggle');
  const leagueChosen = document.getElementById('leagueChosen');
  leagueMenu.innerHTML = LEAGUES.map(function(L){
    return '<button class="menuitem" role="menuitem" data-league="'+L.key+'">'+L.label+'</button>';
  }).join('');
  leagueChosen.textContent = 'All Leagues';
  leagueToggle.addEventListener('click', function(){
    var open = leagueToggle.getAttribute('aria-expanded') === 'true';
    leagueToggle.setAttribute('aria-expanded', String(!open));
    leagueMenu.classList.toggle('hidden', open);
  });
  document.addEventListener('click', function(e){
    if (!leagueWrap.contains(e.target)) {
      leagueToggle.setAttribute('aria-expanded','false');
      leagueMenu.classList.add('hidden');
    }
  });
  leagueMenu.addEventListener('click', function(e){
    var b = e.target.closest('button[data-league]'); if (!b) return;
    leagueKey = b.dataset.league;
    var found = LEAGUES.find(function(x){ return x.key===leagueKey; });
    leagueChosen.textContent = (found && found.label) ? found.label : '';
    leagueToggle.setAttribute('aria-expanded','false');
    leagueMenu.classList.add('hidden');
    renderLists();
  });

  const MINOR_LEAGUE_PATTERNS = [
    /\bu\s?-?\s?(?:13|14|15|16|17|18|19|20|21|23)\b/i,
    /\b(youth|academy|primavera|reserves?)\b/i,
    /\b(friendly|friendlies|club friendly|pre[-\s]?season|amistoso|testspiel)\b/i,
    /\b(premier league 2|professional development league|u23 premier league)\b/i
  ];
  const MINOR_TEAM_PATTERNS = [
    /\bu\s?-?\s?(?:13|14|15|16|17|18|19|20|21|23)\b/i,
    /\b(reserves?)\b/i,
    /\b(ii|b)\b$/i,
    /\bacademy\b/i
  ];
  function isMinor(fx){
    const lname = ((fx.league && fx.league.name ? fx.league.name : '') + ' ' + (fx.league && fx.league.code ? fx.league.code : '')).toLowerCase();
    if (MINOR_LEAGUE_PATTERNS.some(function(rx){ return rx.test(lname); })) return true;
    const h = (fx.home && fx.home.name ? fx.home.name : '').toLowerCase();
    const a = (fx.away && fx.away.name ? fx.away.name : '').toLowerCase();
    return MINOR_TEAM_PATTERNS.some(function(rx){ return rx.test(h); }) || MINOR_TEAM_PATTERNS.some(function(rx){ return rx.test(a); });
  }

  const QS = new URLSearchParams(location.search);
  const majorOnlyEl = document.getElementById('majorOnly');
  const savedMajor = localStorage.getItem('majorOnly');
  if (savedMajor !== null) majorOnlyEl.checked = savedMajor === '1';
  if (QS.get('all') === '1') majorOnlyEl.checked = false;
  majorOnlyEl.addEventListener('change', function(){
    localStorage.setItem('majorOnly', majorOnlyEl.checked ? '1' : '0');
    renderLists();
  });

  pills.forEach(function(p){
    p.addEventListener('click', function(){
      pills.forEach(function(x){ x.classList.remove('active'); });
      p.classList.add('active');
      activeSport = p.dataset.sport;
      renderVisibility();
    });
  });

  function renderVisibility(){
    gridSections.forEach(function(sec){
      var show = (activeSport==='all' || sec.dataset.sport === activeSport);
      sec.style.display = show ? '' : 'none';
    });
  }

  const dateEl = document.getElementById('date');
  function ymd(ts){ const d = new Date(ts); d.setMinutes(d.getMinutes() - d.getTimezoneOffset()); return d.toISOString().slice(0,10); }
  dateEl.value = ymd(Date.now());
  document.getElementById('today').onclick = function(){ dateEl.value = ymd(Date.now()); load(dateEl.value); };
  document.getElementById('tomorrow').onclick = function(){ dateEl.value = ymd(Date.now()+86400000); load(dateEl.value); };
  dateEl.addEventListener('change', function(){ load(dateEl.value); });

  const q = document.getElementById('q');
  q.addEventListener('input', function(){ renderLists(); });

  // === Mobile menu toggling ===
  // When the viewport is narrow (mobile), we collapse the filters and toggles into a slide-down menu.
  // The search input remains visible at all times. Clicking the hamburger button toggles
  // the visibility of the controls container and overlay. Clicking the overlay closes it.
  const menuBtn = document.getElementById('menuBtn');
  const controlsEl = document.querySelector('.controls');
  const menuOverlay = document.getElementById('menuOverlay');
  if (menuBtn && controlsEl && menuOverlay) {
    menuBtn.addEventListener('click', function(){
      const open = controlsEl.classList.toggle('open');
      menuOverlay.classList.toggle('active', open);
    });
    menuOverlay.addEventListener('click', function(){
      controlsEl.classList.remove('open');
      menuOverlay.classList.remove('active');
    });
  }

  function imgTag(url, alt){
    return url ? '<img class="badge" src="'+url+'" alt="'+(alt||'')+'" onerror="this.style.display=\'none\'"/>' : '';
  }
  // Derive a short label for a fixture status.  In addition to the
  // original states (SCHEDULED, LIVE, FINISHED) we surface a special
  // "HALF" state for half‚Äëtime.  This allows the UI to display
  // matches at the interval break without incorrectly marking them as
  // finished or scheduled.  If the upstream API exposes a status like
  // "HT" or contains the word "HALF" we treat it as half time.  Live
  // play in either the first or second half continues to show as LIVE.
  function statusLabel(fx){
    const st = (fx.status || '').toUpperCase();
    // halftime variants
    if (/\bHT\b/.test(st) || /HALF/.test(st)) return 'HALF';
    // live play including 1st or 2nd half
    if (/LIVE|IN_PLAY|1ST|2ND/.test(st)) return 'LIVE';
    // finished matches: treat final, post‚Äëgame and full‚Äëtime codes as finished.  Use word boundaries
    // for FT so that "HALFTIME" does not trigger a finished state.
    if (/STATUS_FINAL|STATUS_POSTGAME|POSTGAME|FINAL|FULL\s?TIME|FULLTIME|ENDED|FINISH(?:ED)?|\bFT\b/.test(st)) return 'FINISHED';
    return 'SCHEDULED';
  }
  function compName(fx){ return fx.league && (fx.league.name || fx.league.code) || ''; }

  function card(fx){
    var a = document.createElement('div');
    a.className = 'game-card';
    a.dataset.startUtc = fx.start_utc || '';
    // Store the derived status label on the dataset.  This allows
    // subsequent logic (such as timers) to detect half‚Äëtime and other
    // custom states without parsing the raw API codes again.
    a.dataset.status = statusLabel(fx);
    // Persist the sport on the dataset for sport‚Äëspecific fallback logic in updateCard
    a.dataset.sport = fx.sport || '';
    var s = slug((fx.home.name || '') + '-vs-' + (fx.away.name || ''));
    var watchHref = WATCH_URL + (WATCH_URL.indexOf('?') === -1 ? '?m=' : '&m=') + encodeURIComponent(s);
    // Build the inner HTML of the card.  We include a favourite toggle (‚òÖ) in the head
    // so users can mark games they care about.  The slug is stored on the dataset
    // for toggle handling.
    a.dataset.slug = s;
    a.innerHTML =
      '<div class="gc-head">' +
        '<div class="left"><span class="dot '+(statusLabel(fx)==='LIVE'?'live':'')+'"></span>' +
        '<span class="state">'+ statusLabel(fx) +'</span>' +
        '<div class="comp">'+ compName(fx) +'</div></div>' +
        // favourite star (clickable)
        '<span class="fav" title="Favourite">‚òÖ</span>' +
        '<div class="sport-tag">'+ ((fx.sport==='Soccer')?'Football':fx.sport) +'</div>' +
      '</div>' +
      '<div class="gc-main">' +
        '<div class="team left">'+ imgTag(fx.home.logo, fx.home.name) + '<span class="name">'+ (fx.home.name||'') +'</span></div>' +
        '<div class="score"><span class="num">0</span><span class="sep"> - </span><span class="num">0</span><div class="when">'+ fmtTime(fx.start_utc) +'</div><div class="countdown"></div></div>' +
        '<div class="team right"><span class="name">'+ (fx.away.name||'') +'</span>' + imgTag(fx.away.logo, fx.away.name) + '</div>' +
      '</div>' +
      '<div class="gc-foot"><a class="watch-btn" '+(OPEN_IN_NEW_TAB?'target="_blank"':'')+' href="'+watchHref+'"><span class="play"></span>Watch Match</a></div>';
    return a;
  }

  function skeleton(){ const d = document.createElement('div'); d.className='game-card skeleton'; return d; }
  function setEmpty(el){ el.innerHTML = '<div class="empty">No games for this day.</div>'; }

  function renderLists(){
    const term = q.value.trim().toLowerCase();
    const footballAll = ALL.filter(function(fx){ return fx.sport === 'Soccer'; });
    const nba = ALL.filter(function(fx){ return fx.sport === 'NBA'; });
    const nfl = ALL.filter(function(fx){ return fx.sport === 'NFL'; });

    const league = LEAGUES.find(function(x){ return x.key === leagueKey; }) || LEAGUES[0];
    const footballPre = footballAll.filter(function(fx){ return league.test(fx); });
    const football = footballPre.filter(function(fx){ return !majorOnlyEl.checked || !isMinor(fx); });

    function fill(arr, id){
      const el = document.getElementById(id);
      el.innerHTML='';
      if (!arr.length) { setEmpty(el); return; }
      let final = arr.slice();
      if (term) final = final.filter(function(fx){ return (fx.home.name + ' ' + fx.away.name).toLowerCase().includes(term); });
      // Sort fixtures by favourite status (favourites first) then by start time
      final.sort(function(a,b){
        const favA = isFav(slug((a.home.name||'')+'-vs-'+(a.away.name||''))) ? 1 : 0;
        const favB = isFav(slug((b.home.name||'')+'-vs-'+(b.away.name||''))) ? 1 : 0;
        if (favA !== favB) return favB - favA; // favourites come first
        return new Date(a.start_utc) - new Date(b.start_utc);
      })
      .forEach(function(fx){
        const cardEl = card(fx);
        // Mark favourites on card and star
        const slugVal = cardEl.dataset.slug;
        if (isFav(slugVal)){
          cardEl.classList.add('favourite');
          const star = cardEl.querySelector('.fav');
          if (star) star.classList.add('active');
        }
        el.appendChild(cardEl);
      });
      if (!final.length) setEmpty(el);
    }

    fill(football, 'football');
    fill(nba, 'nba');
    fill(nfl, 'nfl');

    document.getElementById('counts').textContent =
      'Loaded ' + football.length + ' Football (of ' + footballPre.length +
      (majorOnlyEl.checked ? ' after Major filter' : '') + '), ' +
      nba.length + ' NBA, ' + nfl.length + ' NFL for ' + dateEl.value;
    renderVisibility();
  }

  async function load(dateStr){
    ['football','nba','nfl'].forEach(function(id){
      const el = document.getElementById(id);
      el.innerHTML = ''; for (let i=0;i<3;i++) el.appendChild(skeleton());
    });
    try{
      const todayStr = ymd(Date.now());
      const qb = (dateStr > todayStr) ? (`&force=1&_=${Date.now()}`) : '';
      const r = await fetch('/api/fixtures?date=' + dateStr + qb);
      const j = await r.json();
      ALL = j.fixtures || [];
      renderLists();
    }catch(e){
      document.getElementById('counts').textContent = 'Could not load games. Try again shortly.';
      ['football','nba','nfl'].forEach(function(id){ setEmpty(document.getElementById(id)); });
    }
  }

  // Load fixtures occurring within the next 48 hours.  This helper fetches
  // today‚Äôs and tomorrow‚Äôs fixtures from the backend and filters them
  // to only include matches that start within the next 48 hours (plus a
  // small window for matches that have just kicked off).  The resulting
  // list is stored in the global `ALL` array and the UI is updated.
  async function loadUpcoming(){
    // Show skeleton cards while loading
    ['football','nba','nfl'].forEach(function(id){
      const el = document.getElementById(id);
      el.innerHTML = '';
      for (let i=0;i<3;i++) el.appendChild(skeleton());
    });
    try{
      const now = Date.now();
      const todayStr = ymd(now);
      const tomorrowStr = ymd(now + 86400000);
      const dates = [todayStr, tomorrowStr];
      const results = await Promise.all(dates.map(async function(d){
        // force refresh for future dates to avoid stale cache
        const qb = (d > todayStr) ? (`&force=1&_=${Date.now()}`) : '';
        const r = await fetch('/api/fixtures?date=' + d + qb);
        return r.json();
      }));
      let combined = [];
      results.forEach(function(j){
        if (j && j.fixtures) combined = combined.concat(j.fixtures);
      });
      // Filter to only fixtures starting within the next 48h and those recently started.
      const H48 = 48 * 60 * 60 * 1000;
      // Limit how long finished matches remain visible: remove matches more than 6 hours after kickoff
      const past = 6 * 60 * 60 * 1000;
      const filtered = combined.filter(function(fx){
        const ts = Date.parse(fx.start_utc);
        if (!isFinite(ts)) return false;
        const diff = ts - now;
        return diff < H48 && diff > -past;
      });
      ALL = filtered;
      renderLists();
      // Override counts message to reflect the 48h window
      const footballCount = filtered.filter(function(fx){ return fx.sport === 'Soccer'; }).length;
      const nbaCount = filtered.filter(function(fx){ return fx.sport === 'NBA'; }).length;
      const nflCount = filtered.filter(function(fx){ return fx.sport === 'NFL'; }).length;
      document.getElementById('counts').textContent =
        'Loaded ' + footballCount + ' Football, ' + nbaCount + ' NBA, ' + nflCount + ' NFL (next 48¬†hours)';
    }catch(e){
      document.getElementById('counts').textContent = 'Could not load games. Try again shortly.';
      ['football','nba','nfl'].forEach(function(id){ setEmpty(document.getElementById(id)); });
    }
  }

  // Start by loading upcoming fixtures.  We schedule a refresh every
  // 15¬†minutes to keep the list up‚Äëto‚Äëdate.  The legacy date‚Äëbased
  // loader is no longer used.
  loadUpcoming();
  setInterval(loadUpcoming, 15 * 60 * 1000);

  // Handle favourite toggles.  Use event delegation on the document to
  // capture clicks on the star icon.  When a favourite star is clicked,
  // toggle its state and persist the updated list.  The slug is stored on
  // the card element (data-slug).  After toggling, re-render lists to
  // update ordering and colours.
  document.addEventListener('click', function(evt){
    const target = evt.target;
    if (target && target.classList.contains('fav')){
      const card = target.closest('.game-card');
      if (!card) return;
      const slugVal = card.dataset.slug;
      toggleFav(slugVal);
    }
  });

// === Kixonair timers: 24h kickoff, countdown, LIVE/Finished pill ===
(function(){
  const H=3600*1000, M=60*1000, S=1000;
  const pad = n => String(n).padStart(2,'0');
  const fmtCountdown = ms => {
    if (ms < 0) ms = 0;
    const h = Math.floor(ms/H), m = Math.floor((ms%H)/M), s = Math.floor((ms%M)/S);
    return pad(h)+':'+pad(m)+':'+pad(s);
  };
  function updateCard(el){
    const iso = el.dataset.startUtc || '';
    if(!iso) return;
    const start = Date.parse(iso);
    if(!isFinite(start)) return;
    const now = Date.now();
    const diff = start - now;

    const dot = el.querySelector('.dot');
    const state = el.querySelector('.state');
    const when = el.querySelector('.when');
    const cd   = el.querySelector('.countdown');
    if (when) when.textContent = fmtTime(iso);

    // derive status: prefer dataset, otherwise by time
    let st = String(el.dataset.status||'').toUpperCase();
    if (!st || st==='SCHEDULED'){
      // When no explicit status is provided (SCHEDULED), derive status by comparing
      // the current time against kickoff with sport‚Äëspecific fallbacks.  If a match
      // has started but not finished according to the API, we treat it as LIVE until
      // a reasonable duration has elapsed.  This prevents long matches (e.g. NFL)
      // from staying perpetually live when the upstream feed fails to update.
      const sport = (el.dataset.sport || '').toUpperCase();
      let fallbackHours = 4; // default fallback for unknown sports
      if (sport === 'SOCCER' || sport === 'FOOTBALL') fallbackHours = 2;
      else if (sport === 'NBA') fallbackHours = 3;
      else if (sport === 'NFL') fallbackHours = 4;
      const fallbackMs = fallbackHours * H;
      if (diff <= 0 && diff > -fallbackMs) {
        st = 'LIVE';
      } else if (diff <= -fallbackMs) {
        st = 'FINISHED';
      } else {
        st = 'SCHEDULED';
      }
    }

    if (st==='SCHEDULED'){
      // Upcoming fixture: show countdown until kick‚Äëoff
      if (cd){ cd.textContent = 'Starts in '+fmtCountdown(diff); cd.style.display='block'; }
      if (state){ state.textContent = 'SCHEDULED'; state.classList.remove('live','finished','half'); state.classList.add('scheduled'); }
      if (dot) dot.classList.remove('live');
    }else if (st==='HALF'){
      // Match is at half‚Äëtime: treat similar to live but with a unique label
      if (cd) cd.style.display='none';
      if (state){ state.textContent = 'HALF'; state.classList.remove('live','finished','scheduled'); state.classList.add('half'); }
      // During half time the dot remains red to indicate the match is ongoing
      if (dot) dot.classList.add('live');
    }else if (st==='LIVE'){
      // Match currently in play
      if (cd) cd.style.display='none';
      if (state){ state.textContent = 'LIVE'; state.classList.remove('finished','scheduled','half'); state.classList.add('live'); }
      if (dot) dot.classList.add('live');
    }else{
      // Finished: hide countdown and mark as finished
      if (cd) cd.style.display='none';
      if (state){ state.textContent = 'FINISHED'; state.classList.remove('live','scheduled','half'); state.classList.add('finished'); }
      if (dot) dot.classList.remove('live');
    }
  }
  function tick(){ document.querySelectorAll('.game-card').forEach(updateCard); }

  // Hook after renders
  const _rl = window.renderLists;
  window.renderLists = function(){ _rl(); setTimeout(tick, 30); }
  setInterval(tick, 1000);
  tick();
})();

</script>
</body>
</html>
